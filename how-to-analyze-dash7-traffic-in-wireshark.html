<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>How to analyze DASH7 traffic in wireshark - OSS-7</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="/how-to-analyze-dash7-traffic-in-wireshark.html">

        <meta name="author" content="Glenn Ergeerts" />
        <meta name="keywords" content="Tools" />
        <meta name="description" content="This post explains how to configure wireshark so it can be used to analyze DASH7 traffic captured using a OSS-7 powered node." />

        <meta property="og:site_name" content="OSS-7" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="How to analyze DASH7 traffic in wireshark"/>
        <meta property="og:url" content="/how-to-analyze-dash7-traffic-in-wireshark.html"/>
        <meta property="og:description" content="This post explains how to configure wireshark so it can be used to analyze DASH7 traffic captured using a OSS-7 powered node."/>
        <meta property="article:published_time" content="2014-08-13" />
            <meta property="article:section" content="News" />
            <meta property="article:tag" content="Tools" />
            <meta property="article:author" content="Glenn Ergeerts" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.spacelab.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>

        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="OSS-7 ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
OSS-7            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="/category/news.html">News</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/how-to-analyze-dash7-traffic-in-wireshark.html"
                       rel="bookmark"
                       title="Permalink to How to analyze DASH7 traffic in wireshark">
                        How to analyze DASH7 traffic in wireshark
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-08-13T16:00:00+02:00"> Wed 13 August 2014</time>
    </span>


            <span class="label label-default">By</span>
            <a href="/author/glenn-ergeerts.html"><i class="fa fa-user"></i> Glenn Ergeerts</a>



<span class="label label-default">Tags</span>
	<a href="/tag/tools.html">Tools</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>In this post we assume you already have a OSS-7 powered node running and are able to get the log information using the tools/PyLogger/d7-oss-logger.py script. The OSS-7 stack running on the node needs to be built with LOG_PHY_ENABLED defined, in order to receive the raw packet data.</p>
<p>When the d7-oss-logger.py script is started with the <code>-f [file]</code> parameter it will dump the received traffic to the specified file in the PCAP format (the file format used by wireshark).</p>
<p>Next we need to configure wireshark to correctly dissect this file. Since wireshark obviously does not know about the OSS-7 and DASH7 packet structure we will need to add a dissector plugin which adds support for parsing the DASH7 packets.
This plugin is provided in the form of a lua script and can be found in the OSS-7 repository in the <code>tools/wireshark-dissector/</code> directory. Next we need to tell wireshark to use this script. This can be done by calling the script from the init.lua script by adding the following line:</p>
<div class="codehilite"><pre><span class="nb">dofile</span><span class="p">(</span><span class="s1">&#39;</span><span class="s">&lt;PATH-TO-OSS7&gt;/tools/wireshark-dissector/oss7-wireshark-dissector.lua&#39;</span><span class="p">)</span>
</pre></div>


<p>The init.lua script can found in <code>$HOME/.wireshark/init.lua</code> on linux or <code>C:\Program Files\Wireshark</code> on Windows.</p>
<p>As a final step we need to configure wireshark to use this dissector. This is done by coupling the User 0 link layer type (which the logger uses to write the PCAP file) to the protocol dissector for DASH7. 
To do this select <code>Edit &gt; Preferences &gt; Protocols &gt; DLT_USER &gt; Edit &gt; New</code>. 
Fill in the dialog like in the screenshot below and press OK.
<img alt="DLT" src="/images/dlt.png" /></p>
<p>Now you should be able to analyze DASH7 packets by loading a PCAP file captured with the logger tool. This is shown in the screenshot below.
<img alt="wireshark dissector" src="/images/wireshark-dissector.png" /></p>
<p>The dissector does not yet support the full protocol however. This will be implemented in parallel with the stack itself.
As long as you use the same git revision for the stack and for the dissector script you should be fine.</p>
<p>In a future post we will explain how to go one step further and do live tracing of packets in wireshark instead of reading from a previously captured file.</p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
    <!-- AddThis Button END -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://twitter.com/ossdash7"><i class="fa fa-@ossdash7-on-twitter-square fa-lg"></i> @ossdash7 on Twitter</a></li>
              </ul>
            </li>



            <li class="list-group-item"><a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                </ul>
            </li>



    <li class="list-group-item"><h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
        <div id="gh_repos">
            <p class="list-group-item">Status updating...</p>
        </div>
            <a href="https://github.com/mosaic-lopow">@mosaic-lopow</a> on GitHub
    </li>
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://mosaic-lopow.github.io/dash7-ap-open-source-stack/doxygen" target="_blank">
                Documentation
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://www.uantwerpen.be/en/rg/mosaic/" target="_blank">
                MOSAIC
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.dash7-alliance.org/" target="_blank">
                DASH7 Alliance
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://mosaic-lopow.github.io/dash7-ap-open-source-stack/feeds/all.atom.xml" target="_blank">
                RSS feed
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015 MOSAIC
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>

    <!-- GitHub JS -->
    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = '/theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'mosaic-lopow',
                count: 1,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="/theme/js/github.js" type="text/javascript"></script>
    <!-- End GitHub JS Code -->

        <script type="text/javascript">var addthis_config = {"data_track_addressbar": true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-559a93db51835c05"></script>
</body>
</html>