<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Quickstart - OSS-7</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Quickstart"/>
            <meta property="og:url" content="/pages/quickstart.html"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>

        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="OSS-7 ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
OSS-7            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="/pages/Welcome.html">
                             Welcome
                          </a></li>
                         <li><a href="/pages/community.html">
                             Community
                          </a></li>
                         <li><a href="/pages/hardware.html">
                             Hardware
                          </a></li>
                         <li class="active"><a href="/pages/quickstart.html">
                             Quickstart
                          </a></li>
                         <li><a href="/pages/resources.html">
                             Resources
                          </a></li>
                        <li >
                            <a href="/category/news.html">News</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content" class="body">
        <h1 class="entry-title">Quickstart</h1>
        
        <div class="entry-content">
            <div class="toc">
<ul>
<li><a href="#get-some-hardware">Get some hardware</a></li>
<li><a href="#get-the-source-code">Get the source code</a></li>
<li><a href="#using-texas-instruments-code-composer-studio-toolchain">Using Texas Instruments Code Composer Studio Toolchain</a><ul>
<li><a href="#install-texas-instruments-ccs">Install Texas Instruments CCS</a></li>
<li><a href="#import-the-d7aoss-library-in-ccs">Import the d7aoss library in CCS</a></li>
<li><a href="#test-example-application">Test Example Application</a><ul>
<li><a href="#endpoint-node">Endpoint node</a></li>
<li><a href="#gateway-node">Gateway node</a></li>
</ul>
</li>
<li><a href="#program-the-nodes">Program the nodes</a></li>
</ul>
</li>
<li><a href="#using-the-cmake-buildsystem-for-gcc-based-toolchains">Using the cmake buildsystem for gcc based toolchains</a></li>
<li><a href="#cc430-board-configuration">CC430 board configuration</a></li>
<li><a href="#debug-log">Debug / Log</a></li>
</ul>
</div>
<h2 id="get-some-hardware">Get some hardware</h2>
<p>For an overview of supported hardware, <a href="/pages/hardware.html">look here</a></p>
<h2 id="get-the-source-code">Get the source code</h2>
<p>The code is hosted on <a href="https://github.com/CoSys-Lab/dash7-ap-open-source-stack/commits/master">github</a>, so either fork or clone the repository.</p>
<h2 id="using-texas-instruments-code-composer-studio-toolchain">Using Texas Instruments Code Composer Studio Toolchain</h2>
<p>This section applies only if you want to use TI CCS for programming MSP430/CC430 based nodes. If you want to use a gcc-based toolchain or are using another hardware platform skip over to the next section. </p>
<h3 id="install-texas-instruments-ccs">Install Texas Instruments CCS</h3>
<p>TI CSS can be downloaded <a href="http://www.ti.com/tool/ccstudio">here</a>. </p>
<p>For OSS-7, the free (16 KB code limit for MSP430) can be used.</p>
<h3 id="import-the-d7aoss-library-in-ccs">Import the d7aoss library in CCS</h3>
<ul>
<li>create new CCS project</li>
<li>use project name "d7aoss" and output type "static library"</li>
<li>do not use the default location but point it to /d7aoss in the repository</li>
<li>select CC430F5137 as device, or the one suited for your hardware</li>
<li>select the empty project template and click finish</li>
<li>when using a cc430, choose the correct platform in hal/cc430/platforms/platform.h</li>
<li>in the phy directory include only the used radio in the build, exclude all others (e.g. stub)
  (right click the folder - Build - Exclude resource from build)</li>
<li>in the hal directory include only the used hardware in the build, exclude all others (e.g. stub)</li>
<li>build the project</li>
</ul>
<h3 id="test-example-application">Test Example Application</h3>
<p>For this example the star network example will be used.</p>
<h4 id="endpoint-node">Endpoint node</h4>
<ul>
<li>Create a new CCS Project</li>
<li>Name: star_push_endpoint_example</li>
<li>Output Type: Executable</li>
<li>As location, use examples\star_push_endpoint_example of the repository</li>
<li>Select the correct device</li>
<li>Select "Empty Project"</li>
<li>Configure application to use d7aoss</li>
<li>go to project properties (right click on project - properties)</li>
<li>Build - Dependencies - Add - d7aoss</li>
<li>Build - MSP430 Compiler - Include Options - Add Icon - Workspace - d7aoss</li>
<li>Configure linker</li>
<li>open lnk_cc430f*.cmd</li>
<li>add <code>-l "../../../d7aoss/Debug/d7aoss.lib"</code> at the end of the file the path should point to the d7aoss.lib file created by the d7aoss project</li>
</ul>
<h4 id="gateway-node">Gateway node</h4>
<p>Do exactly the same for the examples\star_push_gateway_example, name this project star_push_gateway_example</p>
<h3 id="program-the-nodes">Program the nodes</h3>
<p>Program the endpoint to one or more nodes, program the gateway to an other one.
Currently we use the <a href="https://www.olimex.com/Products/MSP430/JTAG/MSP430-JTAG-TINY-V2/">Olimex MSP430-JTAG-TINY-V2</a>.</p>
<h2 id="using-the-cmake-buildsystem-for-gcc-based-toolchains">Using the cmake buildsystem for gcc based toolchains</h2>
<p>OSS-7 uses <a href="http://www.cmake.org/">CMake</a> to configure the buildproces settings and toolchain. The following CMake variables should be defined when generating a buildscript:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Possible values</th>
</tr>
</thead>
<tbody>
<tr>
<td>DD7AOSS_PHY_RADIO_DRIVER</td>
<td>defines which radio driver to use</td>
<td>CC430, CC1101, STUB, SIM</td>
</tr>
<tr>
<td>D7AOSS_HAL_DRIVER</td>
<td>defines which hardware abastraction layer implementation to use</td>
<td>CC430, MSP430, STM32L, STUB, SIM</td>
</tr>
<tr>
<td>D7AOSS_BUILD_EXAMPLES</td>
<td>setting the flag build optional examples instead of only the stack</td>
<td>y, n</td>
</tr>
<tr>
<td>CMAKE_TOOLCHAIN_FILE</td>
<td>this files specifies the compiler toolchain to use and specific compiler options</td>
<td>see cmake/toolchains/*.cmake files</td>
</tr>
</tbody>
</table>
<p>You can specify the values of these parameters by using -D arguments on the commandline or by running cmake-gui in the build directory.</p>
<p>Here is an example using CC430, assuming you cloned the repository in the directory oss-7 are inside this directory:</p>
<pre><code class="bash">$ cd ..
$ mkdir oss7-build &amp;&amp; cd oss7-build
$ cmake .. -DD7AOSS_PHY_RADIO_DRIVER=&quot;CC430&quot; -DD7AOSS_HAL_DRIVER=&quot;CC430&quot; -DD7AOSS_BUILD_EXAMPLES=y -DCMAKE_TOOLCHAIN_FILE=&quot;../oss-7/cmake/toolchains/mspgcc.cmake&quot;
$ make
</code></pre>

<h2 id="cc430-board-configuration">CC430 board configuration</h2>
<p>For CC430 there is a (preliminary) board configuration method. Configurations are defined in header files in <code>d7aoss/hal/cc430/platforms/</code> . Choosing your platform is done be defining it in platform.h in the same directory.</p>
<p>This will be replaced by a cmake based system which also works for non CC430 boards later.</p>
<h2 id="debug-log">Debug / Log</h2>
<ul>
<li>You can use the d7-oss-logger in tools\PyLogger to log debug or application data. </li>
<li>You can use the file d7aoss\framework\log.h to define the loglevel of the framework. This will be replaced by a cmake based system later.</li>
<li>With the star_push_gateway_example you will not see any information if you do not enable any logging in log.h, since the application itself does not use the methods in log.h</li>
<li>You can use the d7-logger in tools\pylogger_rss to log the data of the star_push_gateway_example.</li>
<li>Tracing can be enabled by project properties - Build - MSP430-Compiler - Advanced Options - Entry/Exit Hook Options - select name in both entry_param and exit_param.</li>
</ul>
<p>If you use the logger on the gateway of the example and have one endnode programmed you should have an output similar to:</p>
<p><img alt="Logger" src="/images/logger.png" /></p>
<p><a href="http://githalytics.com/CoSys-Lab/dash7-ap-open-source-stack"><img alt="githalytics.com alpha" src="https://cruel-carlota.pagodabox.com/725ca2b507c1d85404803b081f882cab" title="githalytics.com" /></a></p>
        </div>
    </section>
        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">



                <li class="list-group-item"><a href="/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group" id="tags">
                        <li class="list-group-item tag-4">
                            <a href="/tag/general.html">
                                General
                            </a>
                        </li>
                    </ul>
                </li>    
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="https://github.com/CoSys-Lab/dash7-ap-open-source-stack" target="_blank">
                OSS-7 on GitHub
            </a>
        </li>
        <li class="list-group-item">
            <a href="/doxygen" target="_blank">
                API documentation
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.cosys.be/" target="_blank">
                CoSys-Lab
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.dash7.org/" target="_blank">
                DASH7 Alliance
            </a>
        </li>
      </ul>
    </li>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 CoSys-Lab
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="//code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>

</body>
</html>