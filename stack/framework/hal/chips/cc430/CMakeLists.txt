#Add the linker script to use to the linker flags
INSERT_LINKER_FLAGS(BEFORE OBJECTS INSERT "-L${MSP430_SUPPORT_FILES} -Tcc430f5137.ld")

INCLUDE_DIRECTORIES(
    driverlib/MSP430F5xx_6xx
    driverlib/MSP430F5xx_6xx/inc
    ${TOOLCHAIN_DIR}/include
)

#Export the 'inc' directory globally
GLOBAL_INCLUDE_DIRECTORIES("inc")

#Export the em libs to the platform directory ONLY
#Please note we include 'inc' here since for complicated cmake reasons directories exported 
#with 'GLOBAL_INCLUDE_DIRECTORIES'from chip directories are not exported to the platform directory
PLATFORM_INCLUDE_DIRECTORIES(
    driverlib/MSP430F5xx_6xx
    inc_platform
    inc
)

#An object library with name '${CHIP_LIBRARY_NAME}' MUST be generated by the CMakeLists.txt file for every chip
ADD_LIBRARY (${CHIP_LIBRARY_NAME} OBJECT
    driverlib/MSP430F5xx_6xx/gpio.c
    driverlib/MSP430F5xx_6xx/gpio.h
    driverlib/MSP430F5xx_6xx/ucs.c
    driverlib/MSP430F5xx_6xx/ucs.h
    driverlib/MSP430F5xx_6xx/timer_a.c
    driverlib/MSP430F5xx_6xx/timer_a.h
    cc430_pins.c
    cc430_gpio.c
    cc430_atomic.c
    cc430_system.c
    cc430_mcu.c
    cc430_timer.c
)
