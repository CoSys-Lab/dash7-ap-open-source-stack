<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>OSS-7: Open Source Stack for DASH7 Alliance Protocol: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSS-7: Open Source Stack for DASH7 Alliance Protocol
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_gettingstarted.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Hardware</h2>
<p>For an overview of supported hardware, <a class="el" href="md_hardware.html">look here</a></p>
<h2>Building</h2>
<h3>Get prerequisites</h3>
<ul>
<li>OSS-7 code. The code is hosted on <a href="https://github.com/mosaic-lopow/dash7-ap-open-source-stack/commits/master">github</a>, so either fork or clone the repository.</li>
<li><a href="http://www.cmake.org/">CMake</a> (v2.8.12 or greater) as a flexible build system</li>
<li>a GCC-based toolchain matching the target platform for example <a href="https://launchpad.net/gcc-arm-embedded">GCC ARM Embedded</a> for ARM Cortex-M bases platforms or <a href="http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSPGCC/latest/index_FDS.html">Texas Instruments MSP430-GCC</a> for CC430 based platforms</li>
</ul>
<h3>Run cmake</h3>
<p>We will create a build directory and run cmake to generate the buildscript for an ARM EFM32GG based platform in this case: </p><pre class="fragment">$ mkdir build
$ cd build
$ cmake ../dash7-ap-open-source-stack/stack/ \
        -DTOOLCHAIN_DIR=../gcc-arm-none-eabi-4_9-2015q3/ \
        -DCMAKE_TOOLCHAIN_FILE=../dash7-ap-open-source-stack/stack/cmake/toolchains/gcc-arm-embedded.cmake \
        -DPLATFORM=EFM32GG_STK3700 \
        -DPLATFORM_EFM32GG_STK3700_RADIO=cc1101 \
        -DAPP_D7AP_TEST=on
-- Cross-compiling using gcc-arm-embedded toolchain
-- Cross-compiling using gcc-arm-embedded toolchain
-- detected supported platforms: EFM32GG_STK3700EFM32HG_STK3400ifestmatrix_tp1089
-- selected platform: EFM32GG_STK3700
-- The ASM compiler identification is GNU
-- Found assembler: /Users/xtof/Workspace/tmp/gcc-arm-none-eabi-4_9-2015q3/bin/arm-none-eabi-gcc
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/xtof/Workspace/tmp/build
</pre><p>A quick run-down of the different arguments:</p><ul>
<li>we point cmake to the open source stack implementation: <code>../dash7-ap-open-source-stack/stack/</code></li>
<li><code>TOOLCHAIN_DIR</code> points to our gcc cross compiler</li>
<li><code>CMAKE_TOOLCHAIN_FILE</code> points to the cmake configuration for our gcc cross compiler. In this case we are using the ARM cross compiler. If you are on a MSP430 based platform you can use <code>msp430-gcc.cmake</code> in the same directory.</li>
<li><code>PLATFORM</code> is one of the supported platforms (see: <code>dash7-ap-open-source-stack/stack/framework/hal/platforms</code>). Note that the build system will enable platforms based on the selected toolchain so make sure you have select the right toolchain for your target platform.</li>
<li><code>PLATFORM_&lt;insert chosen platform here in capitals&gt;_RADIO</code> identifies the radio we want to use (see: also <code>dash7-ap-open-source-stack/stack/framework/hal/chips</code>).</li>
<li>turn on compilation of chosen app(s): <code>APP_&lt;insert chosen application here in capitals&gt;</code> (see: <code>dash7-ap-open-source-stack/stack/apps</code>).</li>
</ul>
<p>For example configuring a buildscript for the cc430 based wizzimote platform can be done like this: </p><pre class="fragment">$ cmake ../dash7-ap-open-source-stack/stack/ \
        -DTOOLCHAIN_DIR=../msp430-gcc-3.5.0.0/ \
        -DCMAKE_TOOLCHAIN_FILE=../dash7-ap-open-source-stack/stack/cmake/toolchains/msp430-gcc.cmake \
        -DPLATFORM=wizzimote \
        -DAPP_PHY_TEST=on
</pre><h3>Build it!</h3>
<p>If your toolchain is setup correctly you should be able to build the stack and the configured application(s) now: </p><pre class="fragment">$ make
Scanning dependencies of target CHIP_CC1101
[  1%] Building C object framework/hal/platforms/platform/framework/hal/chips/cc1101/CMakeFiles/CHIP_CC1101.dir/cc1101.c.obj
[  2%] Building C object framework/hal/platforms/platform/framework/hal/chips/cc1101/CMakeFiles/CHIP_CC1101.dir/cc1101_interface.c.obj
[  3%] Building C object framework/hal/platforms/platform/framework/hal/chips/cc1101/CMakeFiles/CHIP_CC1101.dir/cc1101_interface_spi.c.obj
[  3%] Built target CHIP_CC1101
Scanning dependencies of target CHIP_EFM32GG
...
[ 97%] Built target d7ap
Scanning dependencies of target d7ap_test.elf
[ 98%] Building C object apps/d7ap_test/CMakeFiles/d7ap_test.elf.dir/d7ap_test.c.obj
[100%] Linking C executable d7ap_test.elf
[100%] Built target d7ap_test.elf
</pre><h3>Build options</h3>
<p>More build options to for example tweak parameters of the stack or platform specific settings can be configured through cmake. This can be done by passing -D options on the commandline (as above) or using the ccmake interactive console interface of the cmake-gui interface as shown below.</p>
<h2>IDE Support</h2>
<p>The OSS-7 buildsystem and code does not require a specific IDE. The user can choose which IDE to use, if any. CMake supports generating project files for Eclipse CDT, CodeBlocks etc, instead of plain makefiles using the -G option. Alternatively you can use an IDE which natively uses cmake projects like Qt Creator or JetBrain's CLion.</p>
<p>For debugging most toolchains come with a GDB client which you can attach to a GDB server which is compatible with your programmer. For instance ARM Cortex-M platforms can use Segger's JLink programmers which comes with JLinkGDBServer. The arm-gcc-embedded toolchain can then be used to connect with the JLinkGDBServer for flashing and debugging. Segger also provides the JLinkDebugger GUI tool for debugging.</p>
<p>For Eclipse user: <a href="http://gnuarmeclipse.livius.net/">here</a> you can find an Eclipse plugin to integrate JLink debugging in Eclipse. Similarly, <a href="http://embsysregview.sourceforge.net/">EmbSysRegView</a> is an Eclipse addin to view the registers of different MCU's.</p>
<p>We don't go into more detail about this here since this depends a lot on your favorite tools and the platform you are using.</p>
<h2>MS Windows support</h2>
<p>While the above is written for Unix OS's (GNU/Linux and Mac OS X) it works on MS Windows as well. On MS Windows you should install the mingw32 compiler and use the "MinGW32 Makefiles" generator option when running cmake. Finally, you should use the <code>mingw32-make</code> command instead of <code>make</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Nov 22 2015 10:16:09 for OSS-7: Open Source Stack for DASH7 Alliance Protocol by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
